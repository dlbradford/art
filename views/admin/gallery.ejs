<!DOCTYPE html>
<html>
<head>
  <title>Gallery Management</title>
  <link rel="stylesheet" href="/style.css">
</head>
<body style="background: <%= settings.backgroundColor %>; color: <%= settings.textColor %>;">
  <div class="admin-bar">
    <span>✏️ Gallery Management</span>
    <div>
      <a href="/admin/dashboard">Dashboard</a>
      <a href="/">View Site</a>
      <a href="/admin/logout">Logout</a>
    </div>
  </div>
  <div class="container" style="padding: 40px;">
    <h1 style="margin-bottom: 30px;">Manage Gallery</h1>
    
    <div class="admin-controls">
      <h3>Upload New Image</h3>
      <form id="uploadImageForm" enctype="multipart/form-data">
        <div class="form-group">
          <label>Title</label>
          <input type="text" id="imageTitle" required>
        </div>
        <div class="form-group">
          <label>Description</label>
          <input type="text" id="imageDescription">
        </div>
        <div class="form-group">
          <label>Image File</label>
          <input type="file" id="imageFile" accept="image/*" required>
        </div>
        <button type="submit">Upload Image</button>
      </form>
    </div>

    <h2 style="margin: 40px 0 20px;">All Images</h2>
    <div class="gallery-grid">
      <% images.forEach(image => { %>
        <div class="gallery-item" data-image-id="<%= image.id %>">
          <img src="/uploads/<%= image.filename %>" alt="<%= image.title %>">
          <div class="gallery-info">
            <div class="gallery-title" data-field="title"><%= image.title %></div>
            <% if (image.description) { %>
              <div class="gallery-description" data-field="description"><%= image.description %></div>
            <% } else { %>
              <div class="gallery-description" data-field="description" style="color: #999; font-style: italic;">No description</div>
            <% } %>
            <div style="margin: 10px 0;">
              <label style="display: flex; align-items: center; font-size: 13px; cursor: pointer;">
                <input type="checkbox" 
                       <%= image.inCarousel ? 'checked' : '' %>
                       onchange="toggleCarousel(<%= image.id %>, this.checked)"
                       style="width: auto; margin-right: 8px; cursor: pointer;">
                <span>Show in carousel</span>
              </label>
            </div>
            <div style="display: flex; gap: 10px; margin-top: 10px;">
              <button onclick="editImage(<%= image.id %>)" class="btn-edit" style="flex: 1; font-size: 12px;">Edit</button>
              <button onclick="deleteImage(<%= image.id %>)" class="btn-danger" style="flex: 1; font-size: 12px;">Delete</button>
            </div>
          </div>
        </div>
      <% }); %>
    </div>
  </div>
  <script src="/script.js"></script>
</body>
</html>
